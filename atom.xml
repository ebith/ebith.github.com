<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[おいら屋ファクトリー]]></title>
  <link href="http://blog.feelmy.net/atom.xml" rel="self"/>
  <link href="http://blog.feelmy.net/"/>
  <updated>2013-03-29T00:49:25+09:00</updated>
  <id>http://blog.feelmy.net/</id>
  <author>
    <name><![CDATA[ebith]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[今月遊んだゲーム]]></title>
    <link href="http://blog.feelmy.net/2013/02/28/played-games/"/>
    <updated>2013-02-28T22:00:00+09:00</updated>
    <id>http://blog.feelmy.net/2013/02/28/played-games</id>
    <content type="html"><![CDATA[<h2><a href="http://store.steampowered.com/app/204100">Max Payne 3</a> ¥1310</h2>

<p>高めの難易度とバレットタイムのシステムがチグハグに感じた。格好良く飛び出すと死ぬ。<br/>
GfWLと似たようなRockstar Games Social Clubがダルい、グラフィックが妙に安っぽい。</p>

<h2><a href="http://store.steampowered.com/app/50650">Darksiders II</a> ¥1243</h2>

<p>主人公の見た目や装備が中二心をくすぐる。デスさんまじ良い人。<br/>
攻撃の種類は数少ないので戦闘は単調になりがち。パズル要素がやや多いのは好みが分かれそう。</p>

<h2><a href="http://amazon.jp/o/ASIN/B0095D6I86?tag=ebith-22">METAL GEAR RISING: REVENGEANCE</a> ¥5699</h2>

<p>雷電まじかっこいい。複雑過ぎないシステムで面白い。雷電このあとどうなんの…<br/>
ボリューム不足で出てくるキャラ達即退場or空気。口の動き英語なの気になる。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Tiarraのログをブラウザから見たり検索したりできるやつ作った]]></title>
    <link href="http://blog.feelmy.net/2013/02/15/tlv-js/"/>
    <updated>2013-02-15T22:00:00+09:00</updated>
    <id>http://blog.feelmy.net/2013/02/15/tlv-js</id>
    <content type="html"><![CDATA[<h2><a href="https://github.com/ebith/TLV.js" title="ebith/TLV.js · GitHub">TLV.js</a></h2>

<p><a href="http://www.flickr.com/photos/ebith/8475029653/" title="tlv01 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8111/8475029653_055048fbb4_n.jpg" width="320" height="240" alt="tlv01"></a>
<a href="http://www.flickr.com/photos/ebith/8475029689/" title="tlv02 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8246/8475029689_ba2e947ac5_n.jpg" width="320" height="240" alt="tlv02"></a><br/>
画像はTwitterのPublic TimelineをIRCのログ代わりにしたやつ。<br/>
古いログをひたすら継ぎ足して表示したり、検索したり、とある日のログを読んだりできる。</p>

<h2>試してみる</h2>

<p>MongoDBは動いてる前提。インストールするなら<a href="http://docs.mongodb.org/manual/installation/" title="Installing MongoDB — MongoDB Manual">Installing MongoDB</a>が詳しい。<br/>
Mongo.pmをtiarraPath/module/Log/に配置、confの例は以下に。<br/>
必要に応じて<code>cpanm MongoDB</code>したのち<code>/load</code>か再起動でMongo.pmを読み込む。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>+ Log::Mongo {
</span><span class='line'>  charset: utf8
</span><span class='line'>  channel: *
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Node.jsとcoffee-scriptが入っていれば<code>npm install</code>して<code>coffee app.coffee</code>で動き出す。<br/>
http://localhost:3000にアクセス！</p>

<h2>その他</h2>

<p>環境変数NODE_ENVを<code>production</code>に設定するとSSL+BASIC認証で起動する。_run.sh参照。<br/>
あとから見返したいチャンネルが1つだけだったのでチャンネル名を考慮していない。全部混ざって表示されるはず。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[HubotでIRC Botを作る]]></title>
    <link href="http://blog.feelmy.net/2013/02/03/hubot-irc/"/>
    <updated>2013-02-03T01:09:00+09:00</updated>
    <id>http://blog.feelmy.net/2013/02/03/hubot-irc</id>
    <content type="html"><![CDATA[<h2>Node.jsのインストールと下準備</h2>

<p>Node.jsの管理には<a href="https://github.com/hokaccha/nodebrew" title="hokaccha/nodebrew · GitHub">Nodebrew</a>を使う。<br/>
Readmeに従ってインストールして、Nodebrew経由でNodeのバイナリを入れる。<br/>
更にcoffee-script必要らしいのとforeverあると便利らしいので入れとく。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>nodebrew install-binary stable
</span><span class='line'>nodebrew use v0.8.17
</span><span class='line'>npm install -g forever
</span><span class='line'>npm install -g coffee-script
</span></code></pre></td></tr></table></div></figure>


<h2>Bot作る</h2>

<p>フォルダ構成はこんなの。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>bot/
</span><span class='line'>├── node_modules
</span><span class='line'>├── scripts
</span><span class='line'>│   ├── colorful-ping.coffee
</span><span class='line'>│   ├── config.coffee
</span><span class='line'>│   ├── fetch-title.coffee
</span><span class='line'>│   ├── rating.coffee
</span><span class='line'>│   ├── reddit-gamedeals.coffee
</span><span class='line'>│   ├── upgrade.coffee
</span><span class='line'>│   └── vpn-manager.coffee
</span><span class='line'>├── hubot-scripts.json
</span><span class='line'>├── package.json
</span><span class='line'>└── run.sh
</span></code></pre></td></tr></table></div></figure>


<p>こんな感じにpackage.json書いてnpm installするとややこしいことなくインストール完了。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;ebithubot&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
</span><span class='line'>  <span class="nt">&quot;dependencies&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;hubot&quot;</span><span class="p">:</span> <span class="s2">&quot;2.3.5&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;hubot-irc&quot;</span><span class="p">:</span> <span class="s2">&quot;0.1.4&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;hubot-scripts&quot;</span><span class="p">:</span> <span class="s2">&quot;2.2.2&quot;</span><span class="p">,</span>
</span><span class='line'>
</span><span class='line'>    <span class="nt">&quot;cron&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;request&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;iconv-jp&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;request&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;cheerio&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;aws-sdk&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nt">&quot;ntwitter&quot;</span><span class="p">:</span> <span class="s2">&quot;*&quot;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>あとは好きなだけスクリプトを書いてBotの機能強化に励む。<br/>
<a href="https://github.com/github/hubot/tree/master/src/scripts" title="hubot/src/scripts at master · github/hubot · GitHub">Hubot付属のscript</a>が良い例。</p>

<h2>運用において</h2>

<p>スクリプトのリロード機能が無くて、毎回再起動するしかないのでIRC Proxy無しでの運用は厳しい。<br/>
かといって普段使いのProxyに繋ぐと入ってるチャンネル全部のメッセージを処理対象にしてしまうのでイマイチ。</p>

<h3>起動スクリプト</h3>

<p>設定類は環境変数で行うのが基本らしいのでシェルスクリプトに<code>export</code>を並び立てる。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'>
</span><span class='line'><span class="c"># hubot</span>
</span><span class='line'><span class="nb">export </span><span class="nv">PORT</span><span class="o">=</span>8889
</span><span class='line'>
</span><span class='line'><span class="c"># hubot-irc</span>
</span><span class='line'><span class="nb">export </span><span class="nv">HUBOT_IRC_UNFLOOD</span><span class="o">=</span><span class="s2">&quot;true&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">HUBOT_IRC_NICK</span><span class="o">=</span><span class="s2">&quot;ebithubot&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">HUBOT_IRC_PORT</span><span class="o">=</span><span class="s2">&quot;6669&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">HUBOT_IRC_SERVER</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span>
</span><span class='line'><span class="nb">export </span><span class="nv">HUBOT_IRC_ROOMS</span><span class="o">=</span><span class="s2">&quot;#ebithubot&quot;</span>
</span><span class='line'>
</span><span class='line'>forever start -c coffee node_modules/hubot/bin/hubot -a irc
</span></code></pre></td></tr></table></div></figure>


<h3>Notice使いたい</h3>

<p><a href="http://blog.fumiz.me/2012/08/05/hubot-irc-bot-script/#notice" title="hubotスクリプトの書き方とサンプル集 | mitc">hubotスクリプトの書き方とサンプル集 | mitc</a>によると互換性のために削除されたらしい。<br/>
hubot-ircにパッチを当てて復活させる。v0.1.4向け。</p>

<div><script src='https://gist.github.com/4505583.js'></script>
<noscript><pre><code>diff --git a/src/irc.coffee b/src/irc.coffee
index 1cd6be3..dbfb495 100644
--- a/src/irc.coffee
+++ b/src/irc.coffee
@@ -5,6 +5,12 @@
 Irc = require 'irc'
 
 class IrcBot extends Adapter
+  constructor: (@robot) -&gt;
+    super @robot
+    @robot.notice = (user, strings...) -&gt;
+      @adapter.notice user, strings...
+    @robot.Response = IrcResponse
+
   send: (user, strings...) -&gt;
     for str in strings
       if not str?
@@ -176,5 +182,9 @@ class IrcBot extends Adapter
 
     self.emit &quot;connected&quot;
 
+class IrcResponse extends Response
+  notice: (strings...) -&gt;
+    @robot.adapter.notice @message.user, strings...
+
 exports.use = (robot) -&gt;
   new IrcBot robot</code></pre></noscript></div>


<h3>データの永続化</h3>

<p>データの永続化はオプションになっていて、Redis以外にもMongoDBやAmazon S3とかファイルも選べるようになってる。<br/>
どれもhubot-scriptsのリポジトリに入っているので<code>hubot-scripts.json</code>に<code>["redis-brain.coffee"]</code>とか書く。<br/>
永続化のための*-brain.coffeeが読み込まれるとrobot.brain.dataが5秒おきに自動保存されるようになる。</p>

<p>ただし02/01/2013現在npm上で最新のhubot-scripts 2.4.1に入ってるredis-brain.coffeeは壊れてるので一つ前の2.2.2とか使うべき。</p>

<h3>forever</h3>

<p>簡単なdaemontoolsみたいなので便利なんだけど、logrotateの仕組みが無いのでログをいっぱい吐いてるとディスクを圧迫する。<br/>
かといってログをrmとかしちゃうとそこで書き込みが止まってしまうのでアレ。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[今月遊んだゲーム]]></title>
    <link href="http://blog.feelmy.net/2013/01/31/played-games/"/>
    <updated>2013-01-31T22:00:00+09:00</updated>
    <id>http://blog.feelmy.net/2013/01/31/played-games</id>
    <content type="html"><![CDATA[<h2><a href="http://store.steampowered.com/app/107100/">Bastion</a> ¥327</h2>

<p>楽しいアクションゲームだった。見た目も綺麗。<br/>
ストーリーはイミフ。</p>

<h2><a href="http://store.steampowered.com/app/204360/">Castle Crashers</a> ¥339</h2>

<p>Coopすべく買ったが難しいのでやらなくなってしまった。<br/>
糞ゲー(汚い意味で)</p>

<h2><a href="http://store.steampowered.com/app/219150/">Hotline Miami</a> ¥222</h2>

<p>ゲームとしては凄くシンプルだけどちゃんと面白い。<br/>
2chのスレにあったストーリーまとめみたいなのを読んだら更に面白くなった。</p>

<h2><a href="http://steamcommunity.com/app/115120">Iron Brigade</a> ¥97</h2>

<p>メカモノ好きだしタワーディフェンスのCoopは楽しい。機体に個性出るのも良い。<br/>
Coop誘うのSteamじゃなくてGames for Windows Live経由なのがダルいしたまにバグる。</p>

<h2><a href="http://steamcommunity.com/app/57740">Jagged Alliance - Back in Action</a> ¥0</h2>

<p>バランス調整Mod入れたら普通に遊べてるし珍しいジャンルなのでそこそこ楽しいけど全体的に作りこみが浅い。<br/>
リメイク元の1999年発売のやつの方が良く出来てるとか聞いた。</p>

<h2><a href="http://store.steampowered.com/app/211360/">Offspring Fling!</a> ¥65</h2>

<p>普通のパズルゲーっぽい。
見た目は可愛い。</p>

<h2><a href="http://steamcommunity.com/app/99300">Renegade Ops</a> ¥0</h2>

<p>敵なぎ倒す系のCoopは単純かつ楽しくていい。<br/>
左手パッド右手マウスでやりたいけどできない。マップ表示がクソい。</p>

<h2><a href="http://steamcommunity.com/app/207040">Sine Mora</a> ¥155</h2>

<p>シューティングゲームだけど一発終了なタイプじゃないから普通に遊べてる。<br/>
でもやっぱ目が疲れるのでアレ。</p>

<h2><a href="http://store.steampowered.com/app/91100/">SkyDrift</a> ¥90</h2>

<p>仲間内でレースすると最高に盛り上がる。もちろんSkype有りで。<br/>
空飛ぶマリカーっぽいけどコース数少ない、バランス悪いとかあるのでPC版マリカー早く！</p>

<h2><a href="http://steamcommunity.com/app/50300">Spec Ops: The Line</a> ¥425</h2>

<p>久しぶりのストーリー重視のTPSで楽しめた。後味の良いストーリーではないけどわりと満足。MultiplayとCoopは未プレイ。<br/>
実績47/50まで8時間足らずというボリュームの少なさはやや寂しいけど物語長引いても面白く無いからこんなもんかも。</p>

<h2><a href="http://store.steampowered.com/app/105600/">Terraria</a> ¥224</h2>

<p>石掘ってると無心になれる。サーバ立てればみんなで一緒に遊べるし、協力して掘ったり戦ったり楽しい。<br/>
次作早くやりたい。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[年末年始にゲーム35本買ったのでその一覧]]></title>
    <link href="http://blog.feelmy.net/2013/01/10/holiday-sale/"/>
    <updated>2013-01-10T00:00:00+09:00</updated>
    <id>http://blog.feelmy.net/2013/01/10/holiday-sale</id>
    <content type="html"><![CDATA[<h2>DRM: Origin</h2>

<ul>
<li>Crysis ¥750</li>
<li>Crysis Warhead ¥750</li>
<li>Crysis 2 ¥1000</li>
</ul>


<p>¥2500</p>

<h2>DRM: Steam</h2>

<ul>
<li>Bastion ¥327</li>
<li>Castle Crashers (4 Pack) ¥1357</li>
<li>Darksiders Franchise Pack (1+2+DLC) ¥1243</li>
<li>Hotline Miami ¥222</li>
<li>Max Payne 3 ¥1310</li>
<li>Renegade Ops ¥0(もらった)</li>
<li>Sine Mora ¥155</li>
<li>SkyDrift (*5) ¥449</li>
<li>Sleeping Dogs + Dragon Master Pack ¥723</li>
<li>Spec Ops: The Line ¥425</li>
<li>Terraria (4 Pack) ¥897</li>
<li>The Humble Indie Bundle 7 ¥586

<ul>
<li>Cave Story+</li>
<li>Closure</li>
<li>Dungeon Defenders + All DLC</li>
<li>Legend of Grimrock</li>
<li>Offspring Fling</li>
<li>Shank 2</li>
<li>Snapshot</li>
<li>The Basement Collection</li>
<li>The Binding of Isaac + Wrath of the Lamb DLC</li>
</ul>
</li>
<li>Toki Tori ¥44</li>
<li>Torchlight II ¥872</li>
</ul>


<h2>合計</h2>

<p>35本 ¥11110</p>

<h2>いろいろ</h2>

<p>回線がやっと光になったのと、最近PCでゲームあんまりやってないなと思ったのでセール情報に貼り付いてたくさん買ってみた。<br/>
効率的にセール情報を得るためにredditの<a href="http://en.reddit.com/r/GameDeals/new/?sort=new" title="newest submissions : GameDeals">newest submissions : GameDeals</a>の新着をポストする<a href="https://twitter.com/gamedealsbot" title="r/GameDeals/new/ (GameDealsBot)さんはTwitterを使っています">Twitter bot</a>作ったけど何故か即凍結されたのでIkachanでIRCに流すことになった。</p>

<p>そういえば動画かなんかを見ただけでやってないな。ってことで買ったCrysisシリーズがちょっと高いというかEA Japanのセールがしょぼい。
挙句の果てに2は面白くなかった。<br/>
あとやっぱOriginとかUplayとか微妙すぎると思うので早くSteamに合流しちゃってほしい。</p>

<p>もらったRenegade Opsとか4packを買ったTerraria, Castle CrashersはCoop用。<br/>
Terrariaのマルチが思っていた以上に楽しくて年末年始はずっとやってた。<br/>
<a href="https://github.com/TShock/TShock" title="TShock/TShock · GitHub">TShock</a>っていう非公式なdedicated serverがよくできていてMono使うとLinuxでも動くし素晴らしい。<br/>
サーバのたて方とかは<a href="http://blog.feelmy.net/2013/01/05/terraria-server-with-ubuntu-server-12.04/" title="さくらのVPS 2G(Ubuntu 12.04)でTerrariaServer(TShock)を動かす - おいら屋ファクトリー">さくらのVPS 2G(Ubuntu 12.04)でTerrariaServer(TShock)を動かす</a>にまとめた。</p>

<p>GamersGateで$2.84だったTom Clancy&#8217;s Ghost Recon: Future Soldierを逃してしまったのを悲しんでいたらその前後のBethesda CollectionとかBorderlands2 4Packとかも合わせて返金騒ぎになってた。</p>

<p>Steamだと日本語字幕入りな代わりにおま値$79.99で買うことはまずないであろうと思っていたSleeping Dogsが、ホリデーセール延長開始時に91%になっていたので飛びついておいた。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[さくらのVPS 2G(Ubuntu 12.04)でTerrariaServer(TShock)を動かす]]></title>
    <link href="http://blog.feelmy.net/2013/01/05/terraria-server-with-ubuntu-server-12.04/"/>
    <updated>2013-01-05T20:33:00+09:00</updated>
    <id>http://blog.feelmy.net/2013/01/05/terraria-server-with-ubuntu-server-12.04</id>
    <content type="html"><![CDATA[<h2>サーバーのセットアップ</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>sudo apt-get install mono-complete
</span><span class='line'>wget https://github.com/downloads/TShock/TShock/TShock-4.0.zip
</span><span class='line'>unzip TShock-4.0.zip
</span><span class='line'>mv serverplugins ServerPlugins
</span><span class='line'>mono TerrariaServer.exe
</span><span class='line'>  # 初期設定ではボス召喚アイテムが使えないので許可する
</span><span class='line'>  modgroup add guest summonboss</span></code></pre></td></tr></table></div></figure>


<h2>クライアントから管理者登録</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>/auth *******
</span><span class='line'>/user add ebith:******** superadmin
</span><span class='line'>/login ebith ********
</span><span class='line'>/auth-verify</span></code></pre></td></tr></table></div></figure>


<h2>運用において</h2>

<p><code>tmux new -s terraria</code>とかしておくとでサーバーコンソールがどこからでも使えて便利。<br/>
サーバーの基本的な設定は<code>tshock/config.json</code>を直接書き換える。<a href="https://tshock.atlassian.net/wiki/display/TSHOCKPLUGINS/Configuration+File+Docs" title="Configuration File Docs - TShock Documentation - Confluence">Configuration File Docs</a>を参照。<br/>
<code>group perm guest</code>でguestユーザが使えるコマンド一覧が表示される。<code>modgroup (add|del) guest hoge</code>で権限操作。<a href="https://tshock.atlassian.net/wiki/pages/viewpage.action?pageId=3047433" title="Commands/Permissions list - TShock Documentation - Confluence">Commands/Permissions list</a>がコマンド一覧。<br/>
サーバーに接続しただけの未登録ユーザはguestに所属する。身内向けならサーバーパスワード有りにして管理者以外は全員guestが楽そう。権限管理的な意味で。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vimperatorを便利に使うためのtips]]></title>
    <link href="http://blog.feelmy.net/2012/12/22/useful-tips-for-vimperator/"/>
    <updated>2012-12-22T00:00:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/12/22/useful-tips-for-vimperator</id>
    <content type="html"><![CDATA[<p><a href="http://atnd.org/events/34070" title="Vimperator Advent Calendar 2012 : ATND">Vimperator Advent Calendar 2012</a> 22日目担当のebithです。<br/>
今日はgistで公開されているプラグインや各ユーザのrcにある便利な設定など、<a href="http://vimpr.github.com/" title="Welcome to vimpr!">vimpr</a>のプラグインリポジトリ外のものを紹介します。</p>

<h2>QB.js (<a href="https://gist.github.com/1766649" title="QB.js 2012/02/08 現在使っているバージョン">https://gist.github.com/1766649</a>)</h2>

<p>コマンドラインへメッセージを表示するechoをGrowlへの通知に変更するプラグインです。<br/>
<a href="https://addons.mozilla.org/ja/firefox/addon/growlgntp/" title="Growl/GNTP :: Add-ons for Firefox">Growl/GNTP</a>のアドオンが必要になりますがWindows/Linux/Macなど各種OSで使用できます。<br/>
webサービスを利用するためのプラグインはコマンドの正否にechoが使われることが多いので、そういったプラグインを入れている人にはオススメです。</p>

<h2>コマンドラインを <Esc> でもあなたのこと、忘れない!! (<a href="https://gist.github.com/2944628" title="コマンドラインを &lt;Esc&gt; でもあなたのこと、忘れない!!">https://gist.github.com/2944628</a>)</h2>

<p>途中でESCを押して消してしまった入力を履歴に残します。<br/>
入力途中にググりたくなっても安心です。</p>

<h2>lazy command</h2>

<p>コマンドを遅延実行します。<br/>
プラグインが読み込まれないと実行できないコマンドを.vimperatorrcに書けるようになります。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'># lazyコマンドを定義
</span><span class='line'>command! -nargs=+ lazy autocmd VimperatorEnter .* &lt;args&gt;
</span><span class='line'>
</span><span class='line'># URL補完の設定。はてなブックマーク拡張のHとadd-url-completer.twのTに遅延実行が必要
</span><span class='line'>lazy set complete=slHT
</span><span class='line'>
</span><span class='line'># loginManager.js用。各種Webサービスに自動的にログインする
</span><span class='line'>lazy :login hatena
</span><span class='line'>lazy :login livedoor
</span><span class='line'>lazy :login nicovideo</span></code></pre></td></tr></table></div></figure>


<h2>autocmd 駆動時のエコーをやめる (<a href="https://gist.github.com/1028562" title="autocmd 駆動時のエコーをやめる">https://gist.github.com/1028562</a>)</h2>

<p>autocmdが静かになります。<br/>
autocmdは自動処理のためのもので<code>:help :autocmd</code>に詳しく書かれています。</p>

<figure class='code'><figcaption><span>便利なautocmd一例</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot; Gmail/LDR/はてブでは新規タブをバックグラウンドで開く</span>
</span><span class='line'>autocmd LocationChange <span class="s1">&#39;^(?!https?://(mail\.google\.com/(mail|a)/|reader\.livedoor\.com/reader/|b\.hatena\.ne\.jp/(?!(entry|articles|guide))))&#39;</span> :<span class="k">set</span><span class="p">!</span> browser.<span class="k">tabs</span>.loadDivertedInBackground<span class="p">=</span>false
</span><span class='line'>autocmd LocationChange <span class="s1">&#39;^https?://(mail\.google\.com/(mail|a)/|reader\.livedoor\.com/reader/|b\.hatena\.ne\.jp/(?!(entry|articles|guide)))&#39;</span> :<span class="k">set</span><span class="p">!</span> browser.<span class="k">tabs</span>.loadDivertedInBackground<span class="p">=</span>true
</span></code></pre></td></tr></table></div></figure>


<h2>サイト内検索</h2>

<p>Googleを使ってサイト内検索するコマンドです。<br/>
オリジナルより少し変更を加えていて、ディレクトリ名が必要な@wikiやはてなダイアリーに対応しています。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">nnoremap</span> <span class="p">,</span><span class="err">/ :sitesearch&lt;Space&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">javascript</span> <span class="o">&lt;&lt;</span><span class="nx">EOM</span>
</span><span class='line'><span class="nx">commands</span><span class="p">.</span><span class="nx">addUserCommand</span><span class="p">(</span>
</span><span class='line'>  <span class="p">[</span><span class="s1">&#39;sitesearch&#39;</span><span class="p">],</span>
</span><span class='line'>  <span class="s1">&#39;Search in this site&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="kd">function</span> <span class="p">(</span><span class="nx">args</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">let</span> <span class="nx">url</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">hostname</span><span class="p">;</span>
</span><span class='line'>    <span class="p">[</span>
</span><span class='line'>      <span class="sr">/d\.hatena\.ne\.jp/</span><span class="p">,</span>
</span><span class='line'>      <span class="sr">/www\d+\.atwiki\.jp/</span><span class="p">,</span>
</span><span class='line'>    <span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">){</span>
</span><span class='line'>      <span class="nx">url</span> <span class="o">+=</span> <span class="nx">r</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">url</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;/&#39;</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">content</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">pathname</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'>    <span class="nx">liberator</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span>
</span><span class='line'>      <span class="s1">&#39;http://www.google.com/search?q=&#39;</span> <span class="o">+</span>
</span><span class='line'>        <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">args</span><span class="p">.</span><span class="nx">literalArg</span><span class="p">)</span> <span class="o">+</span>
</span><span class='line'>        <span class="s1">&#39;+site%3A&#39;</span> <span class="o">+</span>
</span><span class='line'>        <span class="nx">url</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">liberator</span><span class="p">.</span><span class="nx">NEW_TAB</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="p">{</span>
</span><span class='line'>    <span class="nx">completer</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="nx">completion</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">literal</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class='line'>  <span class="p">},</span>
</span><span class='line'>  <span class="kc">true</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'><span class="nx">EOM</span>
</span></code></pre></td></tr></table></div></figure>


<h2>vimpMonkey <a href="http://d.hatena.ne.jp/wlt/20110105/1294204461" title="VimperatorでGreasemonkeyみたいな事をする - wltの日記">http://d.hatena.ne.jp/wlt/20110105/1294204461</a></h2>

<p>VimperatorでGreasemonkeyみたいな事をするためのユーティリティ関数です。<br/>
例では@wikiのページタイトルの前後を入れ替えています。ツリー型タブユーザにオススメです。</p>

<figure class='code'><figcaption><span>vimpMonkey一例</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">javascript</span> <span class="o">&lt;&lt;</span><span class="nx">EOM</span>
</span><span class='line'><span class="c1">// @wikiのページタイトル - を区切りに前後入れ替え</span>
</span><span class='line'><span class="nx">vimpMonkey</span><span class="p">(</span><span class="s1">&#39;http://www\\d+\\.atwiki\\.jp&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>  <span class="nx">content</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span> <span class="o">=</span> <span class="nx">content</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">title</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/(.*) - (.*)/</span><span class="p">,</span> <span class="s1">&#39;$2 - $1&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// VimperatorでGreasemonkeyみたいな事をする - wltの日記 - http://d.hatena.ne.jp/wlt/20110105/1294204461</span>
</span><span class='line'><span class="kd">function</span> <span class="nx">vimpMonkey</span><span class="p">(</span><span class="nx">urlRegexPattern</span><span class="p">,</span> <span class="nx">func</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="kd">var</span> <span class="nx">cmd</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s1">&#39;(function(args) {&#39;</span> <span class="o">+</span>
</span><span class='line'>    <span class="s1">&#39;var content = tabs.getTab(args.tab - 1).linkedBrowser.contentWindow;&#39;</span> <span class="o">+</span>
</span><span class='line'>    <span class="s1">&#39;var unsafeContent = content.wrappedJSObject;&#39;</span> <span class="o">+</span>
</span><span class='line'>    <span class="nx">func</span><span class="p">.</span><span class="nx">toSource</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;();&#39;</span> <span class="o">+</span>
</span><span class='line'>  <span class="s1">&#39;})&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="nx">autocommands</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;PageLoad&#39;</span><span class="p">,</span> <span class="nx">urlRegexPattern</span><span class="p">,</span> <span class="nx">cmd</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nx">EOM</span>
</span></code></pre></td></tr></table></div></figure>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vimperatorで快適Twitter]]></title>
    <link href="http://blog.feelmy.net/2012/12/13/vimperator-is-a-powerful-twitter-client/"/>
    <updated>2012-12-13T00:00:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/12/13/vimperator-is-a-powerful-twitter-client</id>
    <content type="html"><![CDATA[<p><a href="http://atnd.org/events/34070" title="Vimperator Advent Calendar 2012 : ATND">Vimperator Advent Calendar 2012</a> 13日目、二週目に突入のebithです。<br/>
今日はVimperatorプラグインの中でお気に入りの一つであるTwittperatorとそのプラグイン群の紹介をしたいと思います。</p>

<h2>Twittperatorとは</h2>

<p>Streamimg APIにいち早く対応したTwitterクライアントであり、Vimperatorのプラグインでもあります。<br/>
ツイートすることやタイムラインの表示の他にRTやFavはもちろん、会話(in_reply_to)を辿ったり、Twitterを検索したり、特定のツイート(status)のページや誰かのホームを開いたりと言ったことがコマンドラインから可能です。<br/>
また、プラグインを作ることによって自由度の高い拡張が可能で既に幾つものプラグインが存在しています。</p>

<h2>使ってみる</h2>

<p><a href="https://raw.github.com/vimpr/vimperator-plugins/master/twittperator.js">twittperator.js</a>を読み込み、<code>:tw -getPIN</code>で得たPINコードを<code>:tw -setPIN</code>でセットすることで使えるようになります。<br/>
基本的な使い方は<code>:tw</code>コマンドからの補完や<code>:help twittperator</code>を参考にしてください。<br/>
また、一例として少しだけ設定を書いておくので必要に応じて.vimperatorrcに書き足すと良いと思います。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot; Twitterへの接続がSSLのみになったので、Twittperator側でもSSLを使うように</span>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:twittperator_use_ssl_connection_for_api_ep <span class="p">=</span> <span class="m">1</span>
</span><span class='line'>
</span><span class='line'><span class="c">&quot; Streaming APIを使う</span>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:twittperator_use_chirp <span class="p">=</span> <span class="m">1</span>
</span><span class='line'>
</span><span class='line'><span class="c">&quot; 特定の単語を含むツイートを追いかける</span>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:twittperator_track_words <span class="p">=</span> <span class="s2">&quot;vimp,vimperator,twittperator,ついっぺ,ツイッペ&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&quot; Twitter IDの設定。いくつかのプラグインで必要</span>
</span><span class='line'><span class="k">let</span> <span class="k">g</span>:twittperator_screen_name <span class="p">=</span> <span class="s2">&quot;ebith&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&quot; タイムラインの表示</span>
</span><span class='line'><span class="nb">nnoremap</span> <span class="p">,</span>wl :<span class="nb">tw</span><span class="p">&lt;</span>CR<span class="p">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&quot; ツイートする</span>
</span><span class='line'><span class="nb">nnoremap</span> <span class="p">,</span><span class="nb">ww</span> :<span class="nb">tw</span><span class="p">&lt;</span>Space<span class="p">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&quot; 返信する</span>
</span><span class='line'><span class="nb">nnoremap</span> <span class="p">,</span>wr :<span class="nb">tw</span><span class="p">&lt;</span>Space<span class="p">&gt;</span>@
</span><span class='line'>
</span><span class='line'><span class="c">&quot; ツイートに含まれるURLを開く</span>
</span><span class='line'><span class="nb">nnoremap</span> <span class="p">,</span><span class="k">w</span><span class="sr">/ :tw!/</span><span class="p">&lt;</span>Tab<span class="p">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="c">&quot; 会話を辿る</span>
</span><span class='line'><span class="nb">nnoremap</span> <span class="p">,</span>wt :<span class="nb">tw</span><span class="p">!</span>thread<span class="p">&lt;</span>Space<span class="p">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>個性あふれるプラグイン群</h2>

<p>Twittperatorには数々の便利なプラグインが提供されています。<br/>
ここでそれらの一部を紹介します。<br/>
<a href="https://github.com/vimpr/vimperator-plugins/tree/master/twittperator" title="vimperator-plugins/twittperator at master · vimpr/vimperator-plugins · GitHub">https://github.com/vimpr/vimperator-plugins/tree/master/twittperator</a>からダウンロード可能です。</p>

<h3>add-url-completer</h3>

<p><a href="http://vimperator.g.hatena.ne.jp/nokturnalmortum/20110704/1309706089" title="Twittperator の履歴から URL を取り出して、:tabopen などで補完できるようにする - Death to false Web browser! - vimperatorグループ">Twittperator の履歴から URL を取り出して、:tabopen などで補完できるようにする</a></p>

<h3>colorful-log-writer</h3>

<p><a href="http://www.flickr.com/photos/ebith/5674571479/" title="colorful-log-writer | Flickr - Photo Sharing!">tail -fするとカラフルなTLが流れてくるファイルを書き出すTwittperatorプラグイン</a></p>

<h3>eject-alert</h3>

<p><a href="http://vimperator.g.hatena.ne.jp/nokturnalmortum/20120317/1331979169" title="音を鳴らしたりできない環境で、reply に気づけるようにする便利な Twittperator プラグイン - Death to false Web browser! - vimperatorグループ">音を鳴らしたりできない環境で、reply に気づけるようにする便利な Twittperator プラグイン</a></p>

<h3>pong</h3>

<p><a href="http://vimperator.g.hatena.ne.jp/nokturnalmortum/20110330/1301495775" title="Twitter で超反応するための Twittperator 用プラグイン - Death to false Web browser! - vimperatorグループ">Twitter で超反応するための Twittperator 用プラグイン</a></p>

<h3>twsidebar</h3>

<p><a href="http://vimperator.g.hatena.ne.jp/nokturnalmortum/20111102/1320245517" title="サイドバーにTL表示をするプラグイン - Death to false Web browser! - vimperatorグループ">サイドバーにTL表示をするプラグイン</a></p>

<h3>twsidebar-expand-url</h3>

<p><a href="http://d.hatena.ne.jp/ebith/20120808/1344429639" title="短縮URLを展開するTwittperatorプラグイン(twsidebar向け) - おいら屋ファクトリー">短縮URLを展開するTwittperatorプラグイン(twsidebar向け)</a><br/>
画像のサムネイルを表示したり、ツイートを展開表示する機能も付いています</p>

<h3>urusai-namakubi</h3>

<p><a href="http://chi.usamimi.info/Program/Application/BouyomiChan/" title="棒読みちゃん ～ 音声合成で日本語文章を読み上げるツール">棒読みちゃん</a>にタイムラインを読み上げさせるプラグイン。namakubi.js(Vimperatorプラグイン)も必要になります</p>

<h2>最後に</h2>

<p>普段はtwsidebar+twsidebar-expand-urlでタイムラインを流しながらブラウジングして、目に付くツイートがあればコマンドラインからURLを開いたり会話を辿ったりしています。<br/>
僕の.vimperatorrcのTwittperator関連部分を抜き出したものも用意しておきましたので良ければ参考にしてください。<br/>
<a href="https://gist.github.com/4264015">https://gist.github.com/4264015</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vimperatorプラグインを書いてみたい人のためのtips]]></title>
    <link href="http://blog.feelmy.net/2012/12/04/vimperator-plugin-dev-tips/"/>
    <updated>2012-12-04T00:00:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/12/04/vimperator-plugin-dev-tips</id>
    <content type="html"><![CDATA[<p><a href="http://atnd.org/events/34070" title="Vimperator Advent Calendar 2012 : ATND">Vimperator Advent Calendar 2012</a> 4日目のebithです。<br/>
今日はVimperatorプラグインを書いてみたい、もしくは書こうとは思ったけど良くわからなかった人向けの情報などを紹介します。<br/>
だいたいは僕がプラグインを作り始めた時に困ったりハマったりしたことですが、お役に立てれば幸いです。</p>

<h2>そもそもどう書けば良いの</h2>

<p><a href="https://github.com/vimpr/vimperator-plugins/blob/master/function-template.js" title="vimperator-plugins/function-template.js at master · vimpr/vimperator-plugins">サンプル用のプラグイン</a>にプラグインには欠かせないコマンドやマッピングなどの定義例が書いてあります。<br/>
また、<a href="https://github.com/vimpr/vimperator-plugins" title="vimpr/vimperator-plugins">vimpr/vimperator-plugins</a>には200近いプラグインがあるので参考になるはずです。</p>

<h2>プラグイン作るときに便利なやつ</h2>

<h3>ライブラリ</h3>

<p>Vimperator組込みの<code>util</code>や<a href="https://github.com/vimpr/vimperator-plugins/blob/master/_libly.js" title="vimperator-plugins/_libly.js at master · vimpr/vimperator-plugins">_libly.js</a>があります。</p>

<h3>コマンド</h3>

<p><code>:js</code>や<code>:echo</code>を使えば手軽にJavaScriptを実行できます。例) <code>:echo util</code><br/>
<code>:source</code>がプラグインの再読み込みに使えます。</p>

<h3>プラグイン</h3>

<p><a href="https://github.com/vimpr/vimperator-plugins/blob/master/auto_source.js" title="vimperator-plugins/auto_source.js at master · vimpr/vimperator-plugins">auto_source.js</a> - 指定ファイルが変更されると自動的に:sourceします。<br/>
<a href="https://github.com/vimpr/vimperator-plugins/blob/master/echopy.js" title="vimperator-plugins/echopy.js at master · vimpr/vimperator-plugins">echopy.js</a> - echoしつつクリップボードにコピーします。</p>

<!--- [sitesearch](https://github.com/vimpr/vimperator-rc/blob/b6a3ef4de8a7befebbdbad56c1762423bbe1e7f7/anekos/.vimperatorrc.js#L595-L612 "vimperator-rc/anekos/.vimperatorrc.js at b6a3ef4de8a7befebbdbad56c1762423bbe1e7f7 · vimpr/vimperator-rc")
 Googleのサイト内検索を開く-->


<h3>プリントデバッグ</h3>

<p><code>:js!</code>で開くエラーコンソールに、liberator.log()で出力できます。<br/>
ログに残るタイプのechoであるliberator.echomsg()やliberator.echoerr()も便利です。<code>:messages</code>であとからでも読めます。</p>

<h2>既存の動作を変更するプラグインを書きたい</h2>

<p>_libly.jsの$U.aroundを使います。anekosさんの記事が詳しいです。<br/>
<a href="http://vimperator.g.hatena.ne.jp/nokturnalmortum/20100120/1263929847" title="Vimperator 本体のメソッドを書き換えるときの指針 - Death to false Web browser! - vimperatorグループ">Vimperator 本体のメソッドを書き換えるときの指針</a>、
<a href="http://vimperator.g.hatena.ne.jp/nokturnalmortum/20120811/1344688021" title="vimperator で、既存のコマンドにオレオレ動作を差しこむ - Death to false Web browser! - vimperatorグループ">vimperator で、既存のコマンドにオレオレ動作を差しこむ</a></p>

<h2>ググってもググっても情報出てこない</h2>

<p>プラグインに限らずVimperator全体に言えることですが、Googleなどで検索してもまとまった日本語の情報はイマイチ出てきません。<br/>
<a href="https://github.com/vimpr/vimperator-plugins" title="vimpr/vimperator-plugins">vimpr/vimperator-plugins</a>をgrepしたりしてなんとかしましょう。<br/>
JavaScript自体に関しては<a href="https://developer.mozilla.org/" title="Mozilla Developer Network">Mozilla Developer Network</a>が心強いです。</p>

<h2>最後に</h2>

<p>やってみると案外なんとかなるもので、単なるソフトウェアオタクでも少しはプラグイン書けるようになりました。<br/>
多くの人がプラグインを書けばそれだけVimperatorが便利になってみんなが幸せなので是非ともチャレンジしてください。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iGoogleのDays Since(あれやってから何日経ったっけを管理するやつ)クローン作った]]></title>
    <link href="http://blog.feelmy.net/2012/11/24/days-since-app/"/>
    <updated>2012-11-24T22:43:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/11/24/days-since-app</id>
    <content type="html"><![CDATA[<p><img src="https://raw.github.com/ebith/DaysSince/master/public/images/sample.png" alt="" /><br/>
こういうやつ。<br/>
オリジナルは<a href="http://leancode.com/dayssince/" title="Days Since | Leancode">Days Since | Leancode</a>で、今回作ったのが<a href="http://dayssince.feelmy.net/" title="Days Since">Days Since</a>。</p>

<p>Webアプリ的なやつ形にするのって8年ぶりとかな気がするけど便利なフレームワークとかのおかげでググりまくるだけでそれっぽくできたし素晴らしい時代になった。<br/>
今回お世話になったのはPadrino, ActiveRecord, SQLite, Slim, jQuery, Twitter Bootstrapその他いっぱい。</p>

<p>リポジトリは<a href="https://github.com/ebith/DaysSince" title="ebith/DaysSince · GitHub">こっち</a>。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ブレイブリーデフォルトクリアした]]></title>
    <link href="http://blog.feelmy.net/2012/11/04/bravely-default-flying-fairy/"/>
    <updated>2012-11-04T05:23:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/11/04/bravely-default-flying-fairy</id>
    <content type="html"><![CDATA[<div class="hatena-asin-detail">
  <a href="http://www.amazon.co.jp/%E3%82%B9%E3%82%AF%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%BB%E3%82%A8%E3%83%8B%E3%83%83%E3%82%AF%E3%82%B9-%E3%83%96%E3%83%AC%E3%82%A4%E3%83%96%E3%83%AA%E3%83%BC%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88/dp/B008F29CRM%3FSubscriptionId%3DAKIAJVATSFYOD4ND3TIA%26tag%3Debith-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB008F29CRM"><img src="http://ecx.images-amazon.com/images/I/51BdKmAou-L._SL160_.jpg" class="hatena-asin-detail-image" alt="ブレイブリーデフォルト" title="ブレイブリーデフォルト"></a>
  <div class="hatena-asin-detail-info">
    <p class="hatena-asin-detail-title"><a href="http://www.amazon.co.jp/%E3%82%B9%E3%82%AF%E3%82%A6%E3%82%A7%E3%82%A2%E3%83%BB%E3%82%A8%E3%83%8B%E3%83%83%E3%82%AF%E3%82%B9-%E3%83%96%E3%83%AC%E3%82%A4%E3%83%96%E3%83%AA%E3%83%BC%E3%83%87%E3%83%95%E3%82%A9%E3%83%AB%E3%83%88/dp/B008F29CRM%3FSubscriptionId%3DAKIAJVATSFYOD4ND3TIA%26tag%3Debith-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D165953%26creativeASIN%3DB008F29CRM">ブレイブリーデフォルト</a></p>
    <ul>

      <li><span class="hatena-asin-detail-label">出版社/メーカー:</span> スクウェア・エニックス</li>
      <li><span class="hatena-asin-detail-label">発売日:</span> 2012-10-11</li>
      <li><span class="hatena-asin-detail-label">メディア:</span> Video Game</li>
      <li><a href="http://www.amazon.co.jp/review/product/B008F29CRM%3FSubscriptionId%3DAKIAJVATSFYOD4ND3TIA%26tag%3Debith-22%26linkCode%3Dxm2%26camp%3D2025%26creative%3D5143%26creativeASIN%3DB008F29CRM">Amazon のレビューを見る</a></li>
    </ul>
  </div>
  <div class="hatena-asin-detail-foot"></div>
</div>


<p>よくできたJPRGって感じでそこそこ楽しんだ。<br/>
誰にでもオススメできるわけじゃないけどFFっぽいRPGやりたいならアリなんじゃないかな。<br/>
9999*2(刀流)*5(回行動)*2(人)を毎ターンできるのとか楽しい。</p>

<h3>良かったとこ</h3>

<ul>
<li>安定のジョブシステム</li>
<li>ブレイブシステムでテンポ良い戦闘</li>
</ul>


<h3>悪かったとこ</h3>

<ul>
<li>主人公たちの性格とか会話がイマイチに感じた。ストーリー外の話とかだと違和感無かったんでなんか勿体ない感じ。</li>
<li>中盤以降ストーリーの盛り上がりに欠ける上に徒歩移動が増えて、エンカウント率の高さも相まってストレス。</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Chromeのロールトップ バックパック買った]]></title>
    <link href="http://blog.feelmy.net/2012/10/25/i-bought-a-chrome-pawn-rolltop-pack/"/>
    <updated>2012-10-25T22:16:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/10/25/i-bought-a-chrome-pawn-rolltop-pack</id>
    <content type="html"><![CDATA[<p>普段からChromeのメッセンジャーバッグを使っていてお気に入りなんだけど、<br/>
バックパックも欲しくなったので <a href="http://www.chromebagsstore.com/bags/packs/pawn-rolltop-pack.html" title="Chrome Pawn Roll-Top Backpack | Chrome Industries">Chrome Pawn Roll-Top Backpack</a>と<a href="http://www.chromebagsstore.com/bags/accessories/accessory-pouch.html" title="Chrome Accessory Pouch | Chrome Industries">Chrome Accessory Pouch</a>を買った。<br/>
$170+$10(ポーチ10ドル値引きされた)+送料$65の$245で2万円。</p>

<p><a href="http://www.flickr.com/photos/ebith/8121760755/" title="Chrome Pawn Rolltop Pack 2/5 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8324/8121760755_912e254605_n.jpg" width="239" height="320" alt="Chrome Pawn Rolltop Pack 2/5"></a>
<a href="http://www.flickr.com/photos/ebith/8121956238/" title="Chrome Pawn Rolltop Pack 5/5 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8470/8121956238_184936630e_n.jpg" width="239" height="320" alt="Chrome Pawn Rolltop Pack 5/5"></a><br/>
表と裏</p>

<p><a href="http://www.flickr.com/photos/ebith/8121776998/" title="Chrome Pawn Rolltop Pack 1/5 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8187/8121776998_6ec42977c5_n.jpg" width="239" height="320" alt="Chrome Pawn Rolltop Pack 1/5"></a>
<a href="http://www.flickr.com/photos/ebith/8121761479/" title="Chrome Pawn Rolltop Pack 3/5 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8473/8121761479_c7c2762433_n.jpg" width="239" height="320" alt="Chrome Pawn Rolltop Pack 3/5"></a><br/>
防水布の外側には大小2個ずつのポケットが確保されてる。</p>

<p><a href="http://www.flickr.com/photos/ebith/8121777694/" title="Chrome Pawn Rolltop Pack 4/5 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8188/8121777694_be5bd534ca_n.jpg" width="239" height="320" alt="Chrome Pawn Rolltop Pack 4/5"></a><br/>
ターポリン製の内布。外布も少々の水ぐらい弾くし、この内布で鉄壁の防御なのでPCなんかも安心。</p>

<p>おまけにメッセンジャーバッグ(Citizen)の写真も載せとく<br/>
<a href="http://www.flickr.com/photos/ebith/8121778014/" title="Chrome Citizen Buckle Bag 1/4 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8055/8121778014_7dcc2c72e8_n.jpg" width="320" height="239" alt="Chrome Citizen Buckle Bag 1/4"></a>
<a href="http://www.flickr.com/photos/ebith/8121762445/" title="Chrome Citizen Buckle Bag 2/4 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8055/8121762445_5e7d38c7eb_n.jpg" width="320" height="239" alt="Chrome Citizen Buckle Bag 2/4"></a><br/>
<a href="http://www.flickr.com/photos/ebith/8121762795/" title="Chrome Citizen Buckle Bag 3/4 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8465/8121762795_c16a33f76a_n.jpg" width="320" height="239" alt="Chrome Citizen Buckle Bag 3/4"></a>
<a href="http://www.flickr.com/photos/ebith/8121763073/" title="Chrome Citizen Buckle Bag 4/4 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8044/8121763073_3feb1cc725_n.jpg" width="320" height="239" alt="Chrome Citizen Buckle Bag 4/4"></a></p>

<p>土砂降りの雨の中をバイク移動でも何も心配することなくPCを運べる防水性は本当に頼もしいし<br/>
徒歩の時でも鞄濡れること気にしなくて良いのは楽なんですごくおすすめ。</p>

<p>なんだけど、国内だとメッセンジャーバッグぐらいしか買えない上に高いのが悲しいところで<br/>
ネットショップの方は国際電話しての購入確認があるのが不便だしで<br/>
購入のハードルが高いのはどうにかならないかなーって感じする。</p>

<p>今回初めて公式のネットショップから注文で、<br/>
当然電話が必要なこと知らなくて人生初の国際電話にかなりドキドキしたし<br/>
電話口のお兄さんの&#8217;Address&#8217;が聞き取れなくてちょっとアレな会話になったりしたのでもう頼まない。</p>

<p>鞄はお気に入りなんだけど。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Livedoor Readerのサブアカウントを切り替えるためのVimperatorプラグイン]]></title>
    <link href="http://blog.feelmy.net/2012/10/19/ldr-subaccount-switcher-for-vimperator/"/>
    <updated>2012-10-19T02:30:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/10/19/ldr-subaccount-switcher-for-vimperator</id>
    <content type="html"><![CDATA[<div><script src='https://gist.github.com/3913442.js'></script>
<noscript><pre><code>(function(){

 let libly = plugins.libly;
 let apiKey;

 commands.addUserCommand(
   ['ldrSwitch'],
   'Livedoor Readerのサブアカウントを切り替える',
   function (args) {
    if (!args.length) {
      getAcc(function (accList) {
        switchAcc(apiKey, accList[0][0]);
      });
    } else {
      switchAcc(apiKey, args.literalArg);
    }
   },
   {
      literal: 0,
      completer: function (context) {
        context.incomplete = true;
        context.title = ['account'];
        context.compare = void 0;

        getAcc (function (accList) {
          context.completions = accList;
          context.incomplete = false;
        });

      }
    },
    true
  );

  function switchAcc (apiKey, acc) {
    let url = 'http://reader.livedoor.com/account/switch';
    let req = new libly.Request(url, null, {postBody: 'ApiKey=' + apiKey + '&amp;switch_to=' + acc});
    req.addEventListener('onSuccess', function (res) {
      liberator.echo('account switched: ' + acc);
    });
    req.post();
  }

  function getAcc (callback) {
    let url = 'http://reader.livedoor.com/subaccount';
    let req = new libly.Request(url);
    let accList = [];
    req.addEventListener('onSuccess', function (res) {
      apiKey = res.getHTMLDocument('//input[@name=&quot;ApiKey&quot;]')[0].value;
      res.getHTMLDocument('//input[@name=&quot;switch_to&quot;]').forEach(function (acc) {
        accList.push([acc.value, acc.value]);
      });
      callback(accList);
    });
    req.get();
  }

})();
</code></pre></noscript></div>


<p><code>ldrSwitch</code>コマンドが追加されるのでよしなにしてください。</p>

<h3>TODO?</h3>

<p>JSのエラーコンソールにやたらとセキュリティエラーが出ちゃうんだけどよくわからないのでそのままになってる。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[HDDのデータを念入りに消去する]]></title>
    <link href="http://blog.feelmy.net/2012/10/09/permanently-erase-disk/"/>
    <updated>2012-10-09T10:38:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/10/09/permanently-erase-disk</id>
    <content type="html"><![CDATA[<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sfdisk -l                   <span class="c"># 消したいディスクを確認する</span>
</span><span class='line'>shred -v -n 3 -z /dev/hoge  <span class="c"># ランダムデータを3回書き込んだのちゼロフィル</span>
</span></code></pre></td></tr></table></div></figure>


<p>大抵のディストリで可能らしいけど<a href="http://www.sysresccd.org/SystemRescueCd_Homepage" title="SystemRescueCd">SystemRescueCd</a>がシンプルで扱いやすい。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ラズベリーパイを手に入れた！]]></title>
    <link href="http://blog.feelmy.net/2012/10/01/i-got-raspberry-pi/"/>
    <updated>2012-10-01T09:02:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/10/01/i-got-raspberry-pi</id>
    <content type="html"><![CDATA[<p><a href="http://www.flickr.com/photos/ebith/8038651368/" title="Raspberry Pi 1/2 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8462/8038651368_d716208375_n.jpg" width="320" height="239" alt="Raspberry Pi 1/2"></a><a href="http://www.flickr.com/photos/ebith/8038648103/" title="Raspberry Pi 2/2 by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8316/8038648103_f163c4d92a_n.jpg" width="320" height="239" alt="Raspberry Pi 2/2"></a><br/>
6月末にRSに注文したものの、届く気配もなかったのでModMyPiに頼んでみると1週間で到着。<br/>
残念ながらRev1だったけど、Arch Linuxを入れてHeadless運用でしばらく遊ぶことにする。</p>

<p>最初の接続までは<a href="http://hitoriblog.com/?p=9733" title="約3,300円で買えるLinuxパソコンRaspberry PiをMacで使う | ひとりぶろぐ">約3,300円で買えるLinuxパソコンRaspberry PiをMacで使う | ひとりぶろぐ</a>を参考にした。<br/>
<a href="https://github.com/exaviorn/RasPiWrite" title="exaviorn/RasPiWrite">RasPiWrite</a>はエラーを吐くので適当なfork版を使う。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>nmap -sP 192.168.0.0/24
</span><span class='line'>ssh root@x.x.x.x
</span></code></pre></td></tr></table></div></figure>


<p>alarmpiのホスト名だと繋げなかったのでIP探してsshで接続。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>pacman -Syu     <span class="c"># Arch Linuxのアップデート</span>
</span><span class='line'>passwd          <span class="c"># rootのパスワード変更</span>
</span><span class='line'>adduser         <span class="c"># 普段使い用のユーザー追加(sudo用にwheelグループにも所属させておく)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># sudo導入</span>
</span><span class='line'>pacman -S sudo
</span><span class='line'>visudo
</span><span class='line'>  %wheel <span class="nv">ALL</span><span class="o">=(</span>ALL<span class="o">)</span> ALL
</span><span class='line'>  Defaults <span class="nv">timestamp_timeout</span><span class="o">=</span>30
</span><span class='line'>
</span><span class='line'><span class="c"># 固定IPにする(systemd/Services - ArchWiki - https://wiki.archlinux.org/index.php/Systemd/Services#Static_Ethernet_network)</span>
</span><span class='line'>vi /etc/conf.d/network
</span><span class='line'>  <span class="nv">interface</span><span class="o">=</span>eth0
</span><span class='line'>  <span class="nv">address</span><span class="o">=</span>192.168.0.32
</span><span class='line'>  <span class="nv">netmask</span><span class="o">=</span>24
</span><span class='line'>  <span class="nv">broadcast</span><span class="o">=</span>192.168.0.255
</span><span class='line'>  <span class="nv">gateway</span><span class="o">=</span>192.168.0.1
</span><span class='line'>vi /etc/systemd/system/network.service
</span><span class='line'>  <span class="o">[</span>Unit<span class="o">]</span>
</span><span class='line'>  <span class="nv">Description</span><span class="o">=</span>Network Connectivity
</span><span class='line'>  <span class="nv">Wants</span><span class="o">=</span>network.target
</span><span class='line'>  <span class="nv">Before</span><span class="o">=</span>network.target
</span><span class='line'>  <span class="o">[</span>Service<span class="o">]</span>
</span><span class='line'>  <span class="nv">Type</span><span class="o">=</span>oneshot
</span><span class='line'>  <span class="nv">RemainAfterExit</span><span class="o">=</span>yes
</span><span class='line'>  <span class="nv">EnvironmentFile</span><span class="o">=</span>/etc/conf.d/network
</span><span class='line'>  <span class="nv">ExecStart</span><span class="o">=</span>/sbin/ip link <span class="nb">set </span>dev <span class="k">${</span><span class="nv">interface</span><span class="k">}</span> up
</span><span class='line'>  <span class="nv">ExecStart</span><span class="o">=</span>/sbin/ip addr add <span class="k">${</span><span class="nv">address</span><span class="k">}</span>/<span class="k">${</span><span class="nv">netmask</span><span class="k">}</span> broadcast <span class="k">${</span><span class="nv">broadcast</span><span class="k">}</span> dev <span class="k">${</span><span class="nv">interface</span><span class="k">}</span>
</span><span class='line'>  <span class="nv">ExecStart</span><span class="o">=</span>/sbin/ip route add default via <span class="k">${</span><span class="nv">gateway</span><span class="k">}</span>
</span><span class='line'>  <span class="nv">ExecStop</span><span class="o">=</span>/sbin/ip addr flush dev <span class="k">${</span><span class="nv">interface</span><span class="k">}</span>
</span><span class='line'>  <span class="nv">ExecStop</span><span class="o">=</span>/sbin/ip link <span class="nb">set </span>dev <span class="k">${</span><span class="nv">interface</span><span class="k">}</span> down
</span><span class='line'>  <span class="o">[</span>Install<span class="o">]</span>
</span><span class='line'>  <span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</span><span class='line'>vi /etc/resolve.conf
</span><span class='line'>  nameserver 143.90.130.165
</span><span class='line'>  nameserver 143.90.130.39
</span><span class='line'>systemctl disable dhcpcd@eth0.service
</span><span class='line'>systemctl <span class="nb">enable </span>network.service
</span><span class='line'>
</span><span class='line'><span class="c"># ssh, sshd周り</span>
</span><span class='line'>vi /etc/ssh/sshd_config
</span><span class='line'>  PermitRootLogin no
</span><span class='line'>  PubkeyAuthentication yes
</span><span class='line'>  PasswordAuthentication no
</span><span class='line'>  Port xxxxx
</span><span class='line'>systemctl restart sshd.service
</span><span class='line'>su ebith
</span><span class='line'>ssh-keygen  <span class="c"># ローカルにコピーしたり~/.ssh/config設定したりしとく</span>
</span><span class='line'>cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys
</span><span class='line'>
</span><span class='line'><span class="c"># DDNS</span>
</span><span class='line'>vi ~/.crontab
</span><span class='line'>  curl <span class="s1">&#39;http://dynamic.name-services.com/interface.asp?Command=SetDNSHost&amp;HostName=home&amp;Zone=feelmy.net&amp;DomainPassword=xxxxx&#39;</span>
</span><span class='line'>crontab ~/.crontab
</span><span class='line'>
</span><span class='line'><span class="c"># ロケール</span>
</span><span class='line'>sudo vi /etc/locale.gen
</span><span class='line'>  ja_JP.UTF-8 UTF-8
</span><span class='line'>sudo locale-gen
</span><span class='line'>sudo vi /etc/locale.conf
</span><span class='line'>  <span class="nv">LANG</span><span class="o">=</span>ja_JP.UTF-8
</span><span class='line'>
</span><span class='line'><span class="c"># 環境設定</span>
</span><span class='line'>sudo pacman -S git rsync vim zsh
</span><span class='line'>git clone git@github.com:ebith/dotfiles.git
</span><span class='line'><span class="nb">cd </span>dotfiles
</span><span class='line'>git sm init
</span><span class='line'>git sm update
</span><span class='line'><span class="nb">cd</span>
</span><span class='line'>./dotfiles/create_link.sh
</span><span class='line'>chsh -s /bin/zsh
</span></code></pre></td></tr></table></div></figure>


<p><a href="http://d.hatena.ne.jp/mickey24/20120911/air_conditioner_with_arduino" title="うちのbotがエアコンの操作方法を覚えた - ぬいぐるみライフ(仮)">うちのbotがエアコンの操作方法を覚えた - ぬいぐるみライフ(仮)</a>とかすごく楽しそうなのでUSBの赤外線リモコン繋いだら簡単に似たようなことできるのかなとか思ったけど、調度良さそうなのが見つからないしそう簡単な話ではなかった。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[KeePass2のkdbxをMacでも快適に読めるようにした]]></title>
    <link href="http://blog.feelmy.net/2012/09/23/keepass2-for-osx/"/>
    <updated>2012-09-23T04:21:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/09/23/keepass2-for-osx</id>
    <content type="html"><![CDATA[<p>Macbook触ってる時間が長くなってくるとKeePass2がまともに動かないのが凄く気になってきたし、<br/>
かと言って1Passwordは凄く高いのでどうにかしたくて右往左往してたらkdbxを読めるPerlモジュールを見つけたので頑張った。</p>

<p>PerlのFile::KeePassとIO::Prompter、<a href="https://github.com/mooz/percol" title="mooz/percol">mooz/percol</a>が必要。</p>

<div><script src='https://gist.github.com/3767494.js'></script>
<noscript><pre><code>#!/usr/bin/env perl
use strict;
use warnings;
use utf8;

use File::KeePass;
use IO::Prompter;
use Encode;

my $file = shift @ARGV;
my $pass = prompt('Password: ', -e =&gt; '');

my $k = File::KeePass-&gt;new;

$k-&gt;load_db($file, $pass);

$k-&gt;unlock;

my @entries = $k-&gt;find_entries({});

open(OUT, '| percol | awk \'BEGIN { FS = &quot; :: &quot;} { printf $2 }\' | pbcopy ');
foreach my $entry (@entries) {
  next unless ($entry-&gt;{title} &amp;&amp; $entry-&gt;{password});
  print OUT encode_utf8(&quot;$entry-&gt;{title} :: $entry-&gt;{password}\n&quot;);
}
close(OUT);

$k-&gt;clear;</code></pre></noscript></div>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>./keepass.pl ~/ebith.kdbx
</span></code></pre></td></tr></table></div></figure>


<p>みたいな感じで使う。
percolのお陰で絞込み検索が素晴らしい感じなので便利。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ファイラから7-zip(7zG.exe)使うようにすると捗る]]></title>
    <link href="http://blog.feelmy.net/2012/09/18/use-7-zip-from-a-filer/"/>
    <updated>2012-09-18T00:10:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/09/18/use-7-zip-from-a-filer</id>
    <content type="html"><![CDATA[<p>Windowsではずっと統合アーカイバプロジェクトのDLL群とそれらを使うアーカイバにお世話になってきたけど、<br/>
<a href="http://sevenzip.sourceforge.jp/" title="7-Zip">7-Zip</a>のほうが速いので7-Zip付属の7zG.exe, 7z.exeとB2E(Bridge To Executables)に移行することにした。<br/>
B2Eの本家は<a href="http://www.kmonos.net/lib/noah.ja.html" title="Noah - kMonos.NET">Noah</a>だけど、<a href="http://claybird.sakura.ne.jp/garage/lhaforge/" title="泥巣 : 作品庫 - LhaForge">LhaForge</a>の方がコマンドラインオプションが充実していて使いやすいのでそっちを使う。</p>

<div><script src='https://gist.github.com/3737689.js'></script>
<noscript><pre><code>load:
  (name 7zG.exe)
  (type 7z LZMA *LZMA2)

encode:
  (if (method 1) (cmd a -t7z -m0=LZMA (arc.7z) (list\*)))
  (if (method 2) (cmd a -t7z -m0=LZMA2 (arc.7z) (list\*)))</code></pre></noscript></div>


<p>zip, 7z圧縮用と展開用のスクリプト。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>  C:\usr\app\lfarchive\LhaForge.exe /b2e /e                   #展開
</span><span class='line'>  C:\usr\app\lfarchive\LhaForge.exe /b2e /c:zip /method:Store #圧縮(Zip Store)
</span><span class='line'>  C:\usr\app\lfarchive\LhaForge.exe /b2e /c:7z /method:LZMA2  #圧縮(7z LZMA2)</span></code></pre></td></tr></table></div></figure>


<p>LhaForgeをファイラから呼ぶ場合こんな感じ。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[VPSのバックアップをDropboxに取る]]></title>
    <link href="http://blog.feelmy.net/2012/09/17/server-backup-to-dropbox/"/>
    <updated>2012-09-17T09:30:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/09/17/server-backup-to-dropbox</id>
    <content type="html"><![CDATA[<p>簡易的なバックアップで良いので取っておきたかったので、<br/>
tarで固めてlzoで圧縮してDropboxに送るバックアップスクリプト書いた。<br/>
<a href="http://www.andreafabrizi.it/?dropbox_uploader" title="BASH Dropbox Uploader">BASH Dropbox Uploader</a>が必要。</p>

<div><script src='https://gist.github.com/3735146.js'></script>
<noscript><pre><code>#!/bin/bash

# バックアップ対象ディレクトリ
target=&quot;/etc /home/ebith&quot;

# 除外パターン
exclude=(sites/www/rep2 .cpanm .rbenv)

# 一時ファイル
tempfile=&quot;/tmp/backup.tar.lzo&quot;

for v in ${exclude[@]}; do
  e=&quot;$e --exclude=$v&quot;
done

tar --lzop -cf $tempfile $target $e

./dropbox_uploader.sh upload $tempfile /backup/`basename $tempfile`</code></pre></noscript></div>


<p>DropboxのAPIからのアップロードが1ファイル150MBまでなので<br/>
ファイル分割とかできるといいかもしれないけど今んとこ必要ないので付いてない。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[新PCにWindows 7入れた]]></title>
    <link href="http://blog.feelmy.net/2012/09/12/install-windows-7/"/>
    <updated>2012-09-12T21:43:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/09/12/install-windows-7</id>
    <content type="html"><![CDATA[<p>Windows 7のインストールは3回目ぐらい、XPの頃と比べると本当に楽になった。<br/>
OSのインストール後の流れをメモっておく。</p>

<h2>ドライバのインストール</h2>

<ul>
<li>マザーボード系

<ul>
<li>チップセット</li>
<li>LAN</li>
<li>USB3</li>
</ul>
</li>
<li>GPU</li>
<li>サウンドカード</li>
</ul>


<h2>設定</h2>

<ul>
<li>サービスの停止

<ul>
<li>Superfetch</li>
<li>Windows Search</li>
</ul>
</li>
<li>SNP: 無効(<a href="http://itpro.nikkeibp.co.jp/article/COLUMN/20100824/351391/" title="ITアーキテクトの「やってはいけない」 - ［Windows 7編］ネットワーク設定を標準で使ってはいけない：ITpro">ITアーキテクトの「やってはいけない」 - ［Windows 7編］ネットワーク設定を標準で使ってはいけない：ITpro</a>)</li>
<li>システムの復元: 無効</li>
<li>ページングファイル: 最小</li>
<li>ハイバネーション: オフ</li>
<li>バックアップ: 週1に設定</li>
</ul>


<h2>ソフトのインストール</h2>

<ul>
<li><a href="http://www.comodo.com/home/internet-security/free-internet-security.php" title="Free Internet Security, Download Internet Security Software Suite - Comodo">COMODO Internet Security</a>

<ul>
<li>インストールに関しては2chのテンプレが詳しい(<a href="http://find.2ch.net/?STR=comodo+internet+security" title="2ch検索: [comodo internet security]">2ch検索: [comodo internet security]</a>)</li>
<li>日本語化(<a href="http://torichuu.blog69.fc2.com/" title="NipsuのBlog">NipsuのBlog</a>)</li>
</ul>
</li>
<li><a href="https://www.dropbox.com/" title="Dropbox - 生活をシンプルに">Dropbox</a></li>
<li><a href="http://www.fraps.com/" title="FRAPS show fps, record video game movies, screen capture software">FRAPS</a></li>
<li><a href="http://www.mozilla.jp/firefox/" title="次世代ブラウザ Firefox — 高速・安全・カスタマイズ自在な無料ブラウザ">Firefox</a></li>
<li><a href="http://www.google.co.jp/ime/" title="Google 日本語入力 - ダウンロード">Google 日本語入力</a></li>
<li><a href="http://www.growlforwindows.com/gfw/" title="Growl for Windows">Growl for Windows</a></li>
<li><a href="http://www.apple.com/jp/itunes/download/" title="アップル - iTunes - iTunesを今すぐダウンロード">iTunes</a>

<ul>
<li><a href="http://www.apple.com/jp/support/iphone/enterprise/" title="Apple - サポート - iPhone - エンタープライズ">iPhone 構成ユーティリティ</a></li>
<li>C:\Users\ebith\AppData\Roaming\Apple Computer\MobileSyncとC:\Users\ebith\Music\iTunesをデータドライブに移動してシンボリックリンクをはっておく</li>
</ul>
</li>
<li><a href="http://schinagl.priv.at/nt/hardlinkshellext/hardlinkshellext.html" title="Link Shell Extension">Link Shell Extension</a></li>
<li><a href="http://www.skype.com/intl/ja/home" title="オンラインで無料のSkypeインスタント通話と固定電話への格安通話 - Skype">Skype</a></li>
<li><a href="http://store.steampowered.com/" title="Steam へようこそ">Steam</a></li>
<li><a href="http://www.truecrypt.org/" title="TrueCrypt - Free Open-Source On-The-Fly Disk Encryption Software for Windows 7/Vista/XP, Mac OS X and Linux">TrueCrypt</a></li>
<li><a href="https://www.virtualbox.org/" title="Oracle VM VirtualBox">VirtualBox</a>

<ul>
<li><a href="http://www.toptensoftware.com/VBoxHeadlessTray/" title="Topten Software">VBoxHeadlessTray</a></li>
</ul>
</li>
<li><a href="http://www.appletkan.com/nodoka.htm" title="汎用キーバインディング変更ソフト「のどか」">のどか</a></li>
</ul>


<p>その他のファイルはバックアップからコピーして戻す。<br/>
ソフト自体はポータブルなのにインストーラー版しか提供しないソフトが多くてこういう時すごく面倒くさいよね。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ミューズリーのクッキー]]></title>
    <link href="http://blog.feelmy.net/2012/09/11/muesli-cookies/"/>
    <updated>2012-09-11T11:40:00+09:00</updated>
    <id>http://blog.feelmy.net/2012/09/11/muesli-cookies</id>
    <content type="html"><![CDATA[<p><a href="http://www.flickr.com/photos/ebith/7975028474/" title="ミューズリーのクッキー by Ebith, on Flickr"><img src="http://farm9.staticflickr.com/8302/7975028474_740036360a_n.jpg" width="320" height="239" alt="ミューズリーのクッキー"></a><br/>
<a href="http://hnycamera.exblog.jp/13661996" title="ミューズリーのクッキー : ハチミツカメラ">ミューズリーのクッキー : ハチミツカメラ</a>より。<br/>
はちみつじゃなくてメープルシロップだったり、水分やや大目だったりする程度のアレンジ。<br/>
バキバキと硬くて食べごたえのあるクッキーができるのでお気に入り。</p>

<h2>材料</h2>

<ul>
<li>A

<ul>
<li>ミューズリー 140g</li>
<li>薄力粉 60g</li>
<li>きび砂糖 20g</li>
</ul>
</li>
<li>B

<ul>
<li>メープルシロップ 大さじ2</li>
<li>サラダ油 大さじ4</li>
<li>水 大さじ3</li>
</ul>
</li>
</ul>


<h2>手順</h2>

<ol>
<li>Aをフードプロセッサーに入れて軽く回す</li>
<li>Bも入れて回す</li>
<li>天板に適当なサイズで落として指で押し広げる</li>
<li>160度のオーブンで30分焼く</li>
</ol>


<p><a href="https://gist.github.com/3706093" title="ミューズリーのクッキー — Gist">最新のレシピ</a></p>
]]></content>
  </entry>
  
</feed>
